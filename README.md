
<!-- README.md is generated from README.Rmd. Please edit that file -->

# FinancialData

<!-- badges: start -->
<!-- badges: end -->

The main goal of FinancialData is to provide convenient access from R to
some of the information generated by my
[broker-managment](https://github.com/maurogm/broker-management) Scala
project.

Also provides access to data from other sources, and convenience
functions to manipulate it.

## Installation

You can install the FinancialData package locally by cloning the repo
and running:

``` r
devtools::install("path/to/FinancialData")
```

Alternatively, you can install the package from GitHub with:

``` r
devtools::install_github("maurogm/FinancialData")
```

## Example

Loading historic CCL data:

``` r
library(FinancialData)
#> Registered S3 method overwritten by 'quantmod':
#>   method            from
#>   as.zoo.data.frame zoo
ccl <- load_ccl("cclGGAL")
ccl
#>       currency_from currency_to       date        rate
#>    1:           ARS     USD-CCL 2001-12-07    1.246459
#>    2:           ARS     USD-CCL 2001-12-08    1.246459
#>    3:           ARS     USD-CCL 2001-12-09    1.246459
#>    4:           ARS     USD-CCL 2001-12-10    1.055556
#>    5:           ARS     USD-CCL 2001-12-11    1.107955
#>   ---                                                 
#> 8019:           ARS     USD-CCL 2023-11-20  755.532926
#> 8020:           ARS     USD-CCL 2023-11-21  911.337009
#> 8021:           ARS     USD-CCL 2023-11-22  973.553412
#> 8022:           ARS     USD-CCL 2023-11-23 1012.759644
#> 8023:           ARS     USD-CCL 2023-11-24  994.781474
```

Loading recent prices:

``` r
load_my_data("recent_prices") |> tail(10)
#>     exchange ticker       date localCurrency priceLocalCurrency
#>  1:     BCBA   PAMP 2023-11-24           ARS             1871.5
#>  2:     BCBA   ALUA 2023-11-24           ARS             1038.0
#>  3:     BCBA  S30J3       <NA>                               NA
#>  4:     BCBA   MIRG 2023-11-24           ARS            11053.0
#>  5:     BCBA  S31O3       <NA>                               NA
#>  6:     BCBA   AL29 2023-11-24           ARS            32585.0
#>  7:     BCBA   TRAN 2023-11-24           ARS              842.0
#>  8:     NYSE    PBW 2023-11-24           USD               26.5
#>  9:     BCBA   BRKB 2023-11-24           ARS            14746.0
#> 10:     BCBA   LOMA 2023-11-24           ARS             1288.0
#>     homogeneousCurrency priceHomogeneousCurrency
#>  1:                 CCL                 1.881318
#>  2:                 CCL                 1.043445
#>  3:                                           NA
#>  4:                 CCL                11.110983
#>  5:                                           NA
#>  6:                 CCL                32.755938
#>  7:                 CCL                 0.846417
#>  8:                 CCL                26.500000
#>  9:                 CCL                14.823356
#> 10:                 CCL                 1.294757
```

Loading market data and converting currency:

``` r
library(ggplot2)
ypf_ars <- load_market_data("YPFD", "BCBA")
ypf_ccl <- market_data_to_ccl(ypf_ars, ccl)
ggplot(ypf_ccl, aes(x = datetime, y = lastPrice)) +
  geom_line() +
  labs(title = "YPF stock price", x = "Date", y = "Price (CCL-GGAL)")
```

<img src="man/figures/README-ypf-1.png" width="100%" />

Load US Consumer Price Index data and calculate monthly inflation:

``` r
us_cpi <- get_cpi_us()
us_monthly_inflation <- calc_inflation_from_cpi(us_cpi)
us_monthly_inflation[lubridate::year(date) == 2021]
#>           date     cpi monthly_inflation annual_inflation inflation_ajust_coef
#>  1: 2021-01-01 261.582          1.004254         1.013998             1.176193
#>  2: 2021-02-01 263.014          1.005474         1.016762             1.169789
#>  3: 2021-03-01 264.877          1.007083         1.026198             1.161562
#>  4: 2021-04-01 267.054          1.008219         1.041597             1.152093
#>  5: 2021-05-01 269.195          1.008017         1.049927             1.142930
#>  6: 2021-06-01 271.696          1.009291         1.053915             1.132409
#>  7: 2021-07-01 273.003          1.004811         1.053655             1.126988
#>  8: 2021-08-01 273.567          1.002066         1.052513             1.124664
#>  9: 2021-09-01 274.310          1.002716         1.053903             1.121618
#> 10: 2021-10-01 276.589          1.008308         1.062219             1.112376
#> 11: 2021-11-01 277.948          1.004913         1.068090             1.106937
#> 12: 2021-12-01 278.802          1.003073         1.070364             1.103547
```
